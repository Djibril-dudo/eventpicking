<mdb-tabset #staticTabs [buttonClass]="'nav-tabs indigo'" [contentClass]="'card'">
  <mdb-tab heading="Purchases">
    <div class="row">
      <div class="col-12">
        <br>
        <table class="table text-left">
          <thead>
            <tr>
              <td>#</td>
              <td>Transaction ID</td>
              <td>Order Date</td>
              <td>Order Price</td>
              <td>Order Status</td>
              <td>View Order</td>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let transaction of (transactions | async); let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ transaction.invoice_number }}</td>
              <td>{{ transaction.date | date }}</td>
              <td>{{ transaction.amount.total | number:'0.2-2' }} €</td>
              <td>{{ transaction.status | uppercase }}</td>
              <td>
                <a (click)="openTransaction(transaction)" *ngIf="transaction.status === 'available'">
                  <i class="fa fa-eye" aria-hidden="true"></i>
                </a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </mdb-tab>
  <mdb-tab heading="Profile">
    <div class="row">
      <div class="col-12 text-left">
        <br>
        <form [formGroup]="userForm">
          <mdb-squeezebox [multiple]="false" aria-multiselectable="true">

            <mdb-item>
              <mdb-item-head>Contact informations</mdb-item-head>
              <mdb-item-body>
                <div class="md-form">
                  <input type="text" class="form-control" formControlName="name">
                  <label class="active">{{ 'INPUTS.NAME' | translate }}</label>
                </div>
                <div class="md-form">
                  <input type="text" class="form-control" formControlName="lastname">
                  <label class="active">{{ 'INPUTS.LASTNAME' | translate }}</label>
                </div>
                <div class="md-form">
                  <input type="text" class="form-control" formControlName="email">
                  <label class="active">{{ 'INPUTS.EMAIL' | translate }}</label>
                </div>
              </mdb-item-body>
            </mdb-item>

            <mdb-item>
              <mdb-item-head>Billing Address</mdb-item-head>
              <mdb-item-body formArrayName="billingAdress">
                <div class="md-form">
                  <input type="text" class="form-control" formControlName="company">
                  <label class="active">{{ 'INPUTS.COMPANY' | translate }}</label>
                </div>
                <div class="md-form">
                  <input type="text" class="form-control" formControlName="name">
                  <label class="active">{{ 'INPUTS.NAME' | translate }}</label>
                </div>
                <div class="md-form">
                  <input type="text" class="form-control" formControlName="lastname">
                  <label class="active">{{ 'INPUTS.LASTNAME' | translate }}</label>
                </div>
                <div class="md-form">
                  <input type="text" class="form-control" formControlName="phone">
                  <label class="active">{{ 'INPUTS.PHONE' | translate }}</label>
                </div>
                <div class="md-form">
                  <input type="text" class="form-control" formControlName="email">
                  <label class="active">{{ 'INPUTS.CONTACT_EMAIL' | translate }}</label>
                </div>
                <div class="row">
                  <div class="col-md-9">
                    <div class="md-form">
                      <input type="text" class="form-control" formControlName="street">
                      <label class="active">{{ 'INPUTS.STREET' | translate }}</label>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <div class="md-form">
                      <input type="text" class="form-control" formControlName="streetnumber">
                      <label class="active">{{ 'INPUTS.STREET_NUMBER' | translate }}</label>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-3">
                    <div class="md-form">
                      <input type="text" class="form-control" formControlName="zip">
                      <label class="active">{{ 'INPUTS.ZIP' | translate }}</label>
                    </div>
                  </div>
                  <div class="col-md-9">
                    <div class="md-form">
                      <input type="text" class="form-control" formControlName="city">
                      <label class="active">{{ 'INPUTS.CITY' | translate }}</label>
                    </div>
                  </div>
                </div>
              </mdb-item-body>
            </mdb-item>

            <mdb-item>
              <mdb-item-head>Delivery Address</mdb-item-head>
              <mdb-item-body formArrayName="deliveryAdress">
                <div class="md-form">
                  <input type="text" class="form-control" formControlName="company">
                  <label class="active">{{ 'INPUTS.COMPANY' | translate }}</label>
                </div>
                <div class="md-form">
                  <input type="text" class="form-control" formControlName="name">
                  <label class="active">{{ 'INPUTS.NAME' | translate }}</label>
                </div>
                <div class="md-form">
                  <input type="text" class="form-control" formControlName="lastname">
                  <label class="active">{{ 'INPUTS.LASTNAME' | translate }}</label>
                </div>
                <div class="md-form">
                  <input type="text" class="form-control" formControlName="phone">
                  <label class="active">{{ 'INPUTS.PHONE' | translate }}</label>
                </div>
                <div class="md-form">
                  <input type="text" class="form-control" formControlName="email">
                  <label class="active">{{ 'INPUTS.CONTACT_EMAIL' | translate }}</label>
                </div>
                <div class="row">
                  <div class="col-md-9">
                    <div class="md-form">
                      <input type="text" class="form-control" formControlName="street">
                      <label class="active">{{ 'INPUTS.STREET' | translate }}</label>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <div class="md-form">
                      <input type="text" class="form-control" formControlName="streetnumber">
                      <label class="active">{{ 'INPUTS.STREET_NUMBER' | translate }}</label>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-3">
                    <div class="md-form">
                      <input type="text" class="form-control" formControlName="zip">
                      <label class="active">{{ 'INPUTS.ZIP' | translate }}</label>
                    </div>
                  </div>
                  <div class="col-md-9">
                    <div class="md-form">
                      <input type="text" class="form-control" formControlName="city">
                      <label class="active">{{ 'INPUTS.CITY' | translate }}</label>
                    </div>
                  </div>
                </div>
              </mdb-item-body>
            </mdb-item>

          </mdb-squeezebox>

          <br>
          <div class="row no-gutters justify-content-start" style="align-items: center">
            <div class="col-4"></div>
            <div class="col-4">
              <button type="submit" class="btn btn-lg btn-block waves-light pink" mdbRippleRadius (click)="updateProfile()">{{ 'BUTTONS.UPDATE_PROFILE' | translate }}</button>
            </div>
            <div class="col-4"></div>
          </div>

        </form>
      </div>
    </div>
  </mdb-tab>
</mdb-tabset>

<div mdbModal #transactionModal="mdb-modal" class="modal fade" id="transactionModal" tabindex="-1" role="dialog" aria-labelledby="transactionModal"
  aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content" *ngIf="transaction">
      <div class="modal-header indigo">
        <h4 class="modal-title w-100 text-white" id="myModalLabel">Order: {{ transaction.invoice_number }}</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="transactionModal.hide()">
          <span aria-hidden="true" class="text-white">×</span>
        </button>
      </div>
      <div class="modal-body">
        <mdb-tabset #staticTabs [buttonClass]="'nav-tabs indigo'" [contentClass]="''">
          <mdb-tab heading="<i class='fa fa-credit-card'></i> Rechnung">
            <div class="row">
              <div class="col-12">
                <!-- <div class="row text-left">
                   <div class="col-md-4">
                        <h4>Versandadresse</h4>
                        <br>
                        <p>{{ transaction.item_list.shipping_address.recipient_name }}</p>
                        <p>{{ transaction.item_list.shipping_address.line1 }}</p>
                        <p>{{ transaction.item_list.shipping_address.line2 }}</p>
                        <p>{{ transaction.item_list.shipping_address.postal_code }} {{ transaction.item_list.shipping_address.city }}
                        </p>
                        <p>Tel: {{ transaction.item_list.shipping_address.phone }}</p>
                      </div> -->
                <!-- <div class="col-md-4">
                        <h4>Kosten</h4>
                        <br>
                        <p>Gekaufte Artikel: {{ transaction.item_list.items.length }}</p>
                        <p>Kosten: {{ transaction.amount.details.subtotal }}</p>
                        <p>Versandkosten: {{ transaction.amount.details.shipping }}</p>
                        <hr>
                        <p>Gesamtkosten: {{ transaction.amount.total }}</p>
                      </div>
                </div>-->
              </div>
            </div>
          </mdb-tab>
          <mdb-tab heading="<i class='fa fa-download'></i> Downloads">
            <div class="row">
              <div class="col-12">
                <br>
                <table class="table text-left">
                  <thead>
                    <tr>
                      <td>#</td>
                      <td>Name</td>
                      <td>Event</td>
                      <td>Download</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let item of transaction.item_list.items; let i = index">
                      <td>{{ i + 1 }}</td>
                      <td>{{ item.name }}</td>
                      <td>
                        <a target="_blank" [href]="item.url">Open Event</a>
                      </td>
                      <td>
                        <a download="{{ item.name.split('/')[1] }}" [href]="item.downloadUrl" title="ImageName">Download</a>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </mdb-tab>
        </mdb-tabset>
      </div>
    </div>
  </div>
</div>